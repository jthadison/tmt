# TMT Trading System - Staging Environment Configuration Template
# Copy this file to .env.staging and customize for your staging environment

# ============================================================================
# ENVIRONMENT
# ============================================================================
ENVIRONMENT=staging
DEBUG=false
LOG_LEVEL=INFO

# ============================================================================
# OANDA Configuration (STAGING - Practice Account)
# ============================================================================
# Use your OANDA practice account credentials for staging
# Get these from: https://developer.oanda.com/
OANDA_API_KEY=your_oanda_api_key_here
OANDA_ACCOUNT_ID=your_practice_account_id_here
OANDA_ENVIRONMENT=practice
OANDA_BASE_URL=https://api-fxpractice.oanda.com

# ============================================================================
# Trading Configuration (STAGING - Conservative Settings)
# ============================================================================
# Start with trading disabled, enable after verification
ENABLE_TRADING=false

# Conservative risk settings for staging
MAX_CONCURRENT_TRADES=1
RISK_PER_TRADE=0.001  # 0.1% risk for testing
MAX_DAILY_LOSS=0.005  # 0.5% max daily loss
CIRCUIT_BREAKER_THRESHOLD=0.01  # 1% triggers circuit breaker

# Position sizing limits
MAX_POSITION_SIZE=1000  # Small position size for testing
MAX_TRADES_PER_HOUR=2  # Limit trade frequency
EMERGENCY_CLOSE_POSITIONS=true

# ============================================================================
# Service Configuration
# ============================================================================
# Internal Docker network addresses
MESSAGE_BROKER_URL=redis://redis:6379
DATABASE_URL=postgresql://trader:staging_password@postgres:5432/tmt_staging
REDIS_URL=redis://redis:6379

# Agent endpoints (Docker service names)
AGENT_ENDPOINTS={"market-analysis":"http://market-analysis:8001","strategy-analysis":"http://strategy-analysis:8002","parameter-optimization":"http://parameter-optimization:8003","learning-safety":"http://learning-safety:8004","disagreement-engine":"http://disagreement-engine:8005","data-collection":"http://data-collection:8006","continuous-improvement":"http://continuous-improvement:8007","pattern-detection":"http://pattern-detection:8008"}

# ============================================================================
# Notification Configuration
# ============================================================================
# Get Slack webhook URL from: https://api.slack.com/apps -> Your App -> Incoming Webhooks
SLACK_WEBHOOK_URL=your_slack_webhook_url_here
NOTIFICATIONS_ENABLED=true
# Consider using a different Slack channel for staging
SLACK_CHANNEL=staging-trade-alerts

# ============================================================================
# Monitoring & Observability
# ============================================================================
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30
PROMETHEUS_PORT=9090

# Jaeger tracing for staging (optional)
JAEGER_ENABLED=false
JAEGER_ENDPOINT=http://jaeger:14268/api/traces

# ============================================================================
# Security Configuration
# ============================================================================
# Generate a unique JWT secret for staging
JWT_SECRET_KEY=staging-secret-key-change-this-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# Performance Tuning
# ============================================================================
AGENT_HEALTH_CHECK_INTERVAL=30
AGENT_REQUEST_TIMEOUT=10
TRADE_SYNC_INTERVAL=30
TRADE_SYNC_FAST_ON_TRADE=true

# ============================================================================
# Circuit Breaker Configuration
# ============================================================================
CIRCUIT_BREAKER_ACCOUNT_LOSS=0.02  # 2% account loss
CIRCUIT_BREAKER_DAILY_LOSS=0.01    # 1% daily loss
CIRCUIT_BREAKER_CONSECUTIVE_LOSSES=3  # 3 consecutive losses
CIRCUIT_BREAKER_RECOVERY_MINUTES=15   # 15 minute recovery

# ============================================================================
# Feature Flags
# ============================================================================
FEATURE_SESSION_TRADING=false  # Disable advanced features initially
FEATURE_PATTERN_RECOGNITION=true
FEATURE_RISK_MANAGEMENT=true
FEATURE_AUTO_RECOVERY=false